# Alist目录扫描与.strm链接生成器

## 项目简介

此项目旨在自动化流程，针对指定的[Alist](https://alist.nn.ci/)目录中的视频文件（涵盖`.mp4`, `.mkv`, `.avi`, `.wmv`等格式），生成对应的`.strm`链接文件。这些链接文件使得Plex、Jellyfin等媒体服务器能轻松识别并流畅播放视频内容，极大地增强了媒体资源的管理和流媒体访问体验。项目采用异步编程技术以提升效率，并内置了错误处理及日志记录机制，确保长期稳定运行。

## 功能特性

- **异步处理**：借助`httpx`库执行异步HTTP请求，加速目录遍历与直链获取。
- **环境配置灵活性**：通过环境变量配置Alist服务器详情、扫描路径及输出位置，便于部署与调整。
- **日志国际化**：日志信息支持中文翻译，适合非英语母语用户。
- **深度扫描**：递归探索指定目录下的所有层级，复刻目录结构于输出端。
- **链接验证**：有效处理302跳转，确保每一个生成的链接都是可播放的。
- **智能化.strm生成**：仅对新发现或更新的视频文件创建.strm，避免冗余。
- **健壮的错误管理**：全面的错误捕获与日志记录，便于故障排查。

## 快速开始

### 环境要求

- **Python 3.7+**（建议使用最新版本）
- **依赖安装**：通过`pip install httpx`安装必需的`httpx`库。

### 配置指南

1. **设置环境变量**：
   - `ALIST_SCAN_PATH`: 待扫描的Alist目录路径。
   - `ALIST_SERVER_URL`: Alist服务器的根URL。
   - `ALIST_SERVER_TOKEN`: Alist的授权令牌。
   - `OUTPUT_DIR`: 输出.strm文件的目标目录。
   - `WEBDAV_URL`（可选项）: WebDAV基础URL，作为.strm中的链接基础。

### 运行脚本

1. **启动脚本**：在命令行中，切换到脚本目录，执行`python3 script_name.py`（将`script_name.py`替换为实际脚本名称）。

### 注意事项

- **服务器状态**：确保Alist服务在线且配置了正确的访问权限。
- **目录权限**：输出目录必须具备写入权限。
- **日志配置**：默认日志级别为错误，可根据需求调整。

### 自定义与拓展

- **模块化设计**：便于根据需求调整或添加功能，比如支持其他文件类型或定制链接格式。

### 问题反馈

- 遇到问题或有改进意见，请在[GitHub](https://github.com/)提交issue，或直接fork项目并提交pull request。
